<html>
<head>
	<title>quissi de noi</title>
	<script src="js/three.js"></script>
</head>
<body>
	<script>
	var camera, scene, scene1, renderer;

	var rotation=0;
	var mesh1, mesh2;

	var puntatore;

	init();
	animate();

	function init(){
		scene = new THREE.Scene();
		//scene1 = new THREE.Scene();

		camera = new THREE.PerspectiveCamera ( 75, window.innerWidth/window.innerHeight, 1, 10000);

		//camera.position.z=5;
		//camera.rotation.y=1;
		camera.applyMatrix( new THREE.Matrix4().makeTranslation(0, 0, 20) );
		//scene.add(camera);

		var geometry1 = new THREE.BoxGeometry(10,10,10);
		var geometry2 = new THREE.BoxGeometry(10,10,10);
		
		var material = new THREE.MeshLambertMaterial({color: 'blue' });
		
		geometry1.applyMatrix( new THREE.Matrix4().makeTranslation(0, 0, 0) );
		mesh1 = new THREE.Mesh(geometry1, material);
		
		geometry2.applyMatrix( new THREE.Matrix4().makeTranslation(0, 0, 0) );
		mesh2 = new THREE.Mesh(geometry2, material);
		
		mesh1.position.x = -10;
		mesh2.position.x = +10;
		//mesh1.overdraw = true;
		//mesh2.overdraw = true;
		mesh1.castShadow = true;
		mesh2.castShadow = true;

		mesh1.reciveShadow = true;
		mesh2.reciveShadow = true;
		
		scene.add(mesh1);
		scene.add(mesh2);

		camera.lookAt(scene.position);

		
		var puntatore = new THREE.BoxGeometry(0.1,0.1,0.1);
		var material = new THREE.MeshBasicMaterial(0x00ff00);
		puntatore.applyMatrix( new THREE.Matrix4().makeTranslation(0, 0, -5) );
		puntatore = new THREE.Mesh(puntatore, material);

		camera.add(puntatore);
		
		
		scene.add(camera);


		var directionalLight = new THREE.DirectionalLight(0xffffff);
      	directionalLight.position.set(3, 3, 3);
      	directionalLight.castShadow = true;
      	scene.add(directionalLight);



		renderer = new THREE.WebGLRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );
        renderer.shadowMapEnabled = true;
        document.body.appendChild( renderer.domElement );

        //alert(camera.position.x+" "+camera.position.y+" "+camera.position.z);
	}

	function animate(){
		requestAnimationFrame(animate);
		
		mesh1.rotation.x+=0.01;
		mesh2.rotation.z-=0.1;

		//camera.lookAt(mesh1.position);
		
		rotation += 0.01;
		camera.position.y = 0;
		camera.position.x = Math.sin(rotation) * 30;
		camera.position.z = Math.cos(rotation) * 30;
		//camera.lookAt( scene.position );
		camera.lookAt(scene.position);
	
		renderer.render(scene, camera);
	}

	</script>	
</body>
</html>